(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,n){},135:function(e,t,n){"use strict";n.r(t);var a,o=n(0),r=n.n(o),i=n(9),l=n.n(i),c=(n(99),n(23)),s=n(15),u=n(27),d=n(24),m=n(26),p=(n(100),n(171)),b=n(90),h=n(34),E=n(31),g=n(12),v=n(6),f=n(14),O=n(175),D=n(173),j="LOGIN_VRM/SET_TOKEN",S=Object(O.a)("LOGIN_VRM/SET_ISNTLOGIN"),y=Object(O.a)(j),N={islogin:!1,username:"",idUser:null,headerWithToken:{},login:"175.com.ua@gmail.com",pass:"Ww9TArkV!dndv53"},w=Object(D.a)((a={},Object(v.a)(a,S,function(e,t){t.payload;return N}),Object(v.a)(a,y,function(e,t){var n=t.payload;return Object(f.a)({},e,n)}),a),N),M=function(e){return e.loginVRM},T=n(174),A=n(167),C=r.a.createRef(),R=function(e){var t=e.onChangeLoginPass,n=e.isLogin,a=e.loginRequest;return n.islogin?null:r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(T.a,{autoFocus:!0,placeholder:"login or email:",onChange:function(e){var n=e.target.value;return t({login:n})},onKeyDown:function(e){13===e.keyCode&&C.current.focus()},value:n.login})),r.a.createElement("div",null,r.a.createElement(T.a,{inputRef:C,type:"password",placeholder:"password",onChange:function(e){var n=e.target.value;return t({pass:n})},onKeyDown:function(e){13===e.keyCode&&a(n)},value:n.pass})),r.a.createElement("div",null,r.a.createElement(A.a,{variant:"outlined",color:"secondary",onClick:function(){return a(n)}},"Login")))},L=function(e){var t=e.isLogin,n=e.logout;return t.islogin?r.a.createElement("div",null,r.a.createElement("div",null,"login as: ".concat(t.username)),r.a.createElement("div",null,r.a.createElement(A.a,{color:"secondary",onClick:function(){n()}},"Exit"))):null},x=n(66),I=n.n(x),z="INSTALLATIONS_VRM/SET_INSTALLATIONS",_=Object(O.a)(z),k=Object(D.a)(Object(v.a)({},_,function(e,t){var n=t.payload;return Object(f.a)({},n)}),{data:{success:!1}}),W=function(e){return e.installationsVRM},Y="INSTALLATIONS_OBJECT_DATA/SET_DATA",X=Object(O.a)(Y),H=Object(D.a)(Object(v.a)({},X,function(e,t){var n=t.payload;return Object(f.a)({},n)}),{}),B=function(e){return e.installationsObjectData},P="https://vrmapi.victronenergy.com",U="/v2/auth/login";var V,G,J=(V=function(e){return"".concat(P,"/v2/users/").concat(e,"/installations?extended=1")},G=_,function(e,t,n){return function(a){I()({method:"get",url:V(e),headers:t}).then(function(e){a(G(e)),a(n(e))},function(e){return console.log(e)})}});function q(e){return function(t){if(e.data&&e.data.records){var n={};return e.data.records.map(function(e){var t={siteName:e.name};return e.extended.map(function(e){return t[e.idDataAttribute||e.code]={name:e.description,value:e.formattedValue},null}),n[e.idSite]=t,null}),t(X(n)),n}return null}}var Z=null;function K(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;return function(n){Z=setTimeout(function(){Z=setInterval(function(){e.islogin&&n(J(e.idUser,e.headerWithToken,q))},t)},t)}}var F=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onChangeLoginPass,n=e.isLogin,a=e.logout,o=e.loginRequest;return r.a.createElement("div",{className:"login"},r.a.createElement(R,{onChangeLoginPass:t,isLogin:n,logout:a,loginRequest:o}),r.a.createElement("div",null,r.a.createElement(L,{isLogin:n,logout:a})))}}]),t}(r.a.Component),$={onChangeLoginPass:y,logout:S,loginRequest:function(e){return function(t){I()({method:"post",url:P+U,data:'{"username": "'.concat(e.login,'", "password": "').concat(e.pass,'"}')}).then(function(n){if(200===n.status){var a={"X-Authorization":"Bearer "+n.data.token},o=n.data.idUser,r={islogin:!0,username:e.login,idUser:o,headerWithToken:a};t(y(r)),t(J(r.idUser,r.headerWithToken,q))}},function(e){return console.log(e),null})}}},Q=Object(g.b)(function(e){return{isLogin:M(e)}},$)(F),ee=function(e){var t=new Date(1e3*e.last_timestamp),n=t.getFullYear(),a=t.getMonth()+1>9?t.getMonth()+1:"0"+(t.getMonth()+1),o=t.getDate()>9?t.getDate():"0"+t.getDate(),r=t.getHours()>9?t.getHours():"0"+t.getHours(),i=t.getMinutes()>9?t.getMinutes():"0"+t.getMinutes();return!0===e.alarm?"".concat(e.name," ( last connect: ").concat(r,":").concat(i," ").concat(o,".").concat(a,".").concat(n," ) !alarm!"):"".concat(e.name," ( last connect: ").concat(r,":").concat(i," ").concat(o,".").concat(a,".").concat(n," )")},te=[143,215],ne=["consumption","solar_yield","from_to_grid"],ae=function(e){var t=e.extended,n=t.filter(function(e){return-1!==te.indexOf(e.idDataAttribute)}),a=t.filter(function(e){return-1!==ne.indexOf(e.code)}),o=n.concat(a);return r.a.createElement("div",{className:"small-site-data"},o.map(function(e){return r.a.createElement("div",{key:e.idDataAttribute||e.code},e.description," ",e.formattedValue)}))},oe=function(e){var t=e.site,n=e.selectInst,a=e.selectedInst;e.isLogin;return t.idSite===a?r.a.createElement("div",null,r.a.createElement(A.a,{color:"primary",disabled:!0},ee(t)),r.a.createElement(ae,{extended:t.extended})):r.a.createElement("div",null,r.a.createElement(A.a,{color:"primary",onClick:function(){n(t.idSite)}},ee(t)))},re=function(e){var t=e.installationResponce,n=e.selectInst,a=e.selectedInst,o=e.isLogin;return t&&t.data.success?r.a.createElement("div",{className:"installation-menu"},t.data.records.map(function(e){return r.a.createElement("div",{key:e.idSite},r.a.createElement(oe,{site:e,selectInst:n,selectedInst:a,isLogin:o}))})):r.a.createElement("div",null,"Can`t receive installations list")},ie=Object(O.a)("SELECTED_INST/SET_INST"),le=Object(D.a)(Object(v.a)({},ie,function(e,t){return t.payload}),null),ce=function(e){return e.selectedInst},se=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillUnmount",value:function(){clearInterval(Z),clearTimeout(Z)}},{key:"componentWillMount",value:function(){this.props.updateInstallations(this.props.isLogin,2e4)}},{key:"render",value:function(){var e=this.props,t=e.isLogin,n=e.installationResponce,a=e.selectInst,o=e.selectedInst;return t.islogin?r.a.createElement("div",{className:"installations"},r.a.createElement(E.a,{push:!0,to:"/sites"}),r.a.createElement(re,{installationResponce:n,selectInst:a,selectedInst:o,isLogin:t})):r.a.createElement("div",{className:"inner-warning"},"Please login first!")}}]),t}(r.a.Component),ue={selectInst:ie,setInstallations:_,setInstallationObjectData:X,updateInstallations:K},de=Object(g.b)(function(e){return{isLogin:M(e),installationResponce:W(e),selectedInst:ce(e)}},ue)(se),me=n(169),pe=n(170);function be(e){var t=e.dashboards,n=e.hide,a=e.toggleHide,o=e.setDashboardName,i=e.clearNewDashboard,l=e.clearWidgetSize;return n?r.a.createElement("div",{className:"main-menu-conteiner"},r.a.createElement(A.a,{variant:"outlined",color:"primary",className:"main-menu-button",onClick:a},"Menu")):r.a.createElement("div",{className:"main-menu-conteiner",onMouseLeave:a},r.a.createElement(A.a,{variant:"outlined",color:"primary",className:"main-menu-button",onClick:a},"Menu"),r.a.createElement("div",{className:"main-menu"},r.a.createElement(h.b,{to:"/sites",onClick:a},r.a.createElement("div",{className:"main-menu-base-elem"},"Go to main")),t.map(function(e,t){return e?r.a.createElement(h.b,{key:t,to:"/dashboards/?id=".concat(e.id),onClick:a},r.a.createElement("div",{className:"main-menu-elem"},e.name)):null}),r.a.createElement(h.b,{to:"/newdashboard",onClick:function(){a(),o("Dashboard #".concat(t.length)),i(),l()}},r.a.createElement("div",{className:"main-menu-base-elem"},"Create new dashboard"))))}var he,Ee=Object(O.a)("MOUSE_COORD/SET_COORD"),ge=Object(D.a)(Object(v.a)({},Ee,function(e,t){var n=t.payload;return Object(f.a)({},e,n)}),{in:!0,X:0,Y:0,dragX:0,dragY:0}),ve=function(e){return e.mouseCoordinates},fe=n(172),Oe=n(176),De=Object(O.a)("NEW_ELEMENT/SET_ELEMENT"),je=Object(O.a)("NEW_ELEMENT/CLEAR_ELEMENT"),Se={type:"param",idSite:"-",param:"-"},ye=Object(D.a)((he={},Object(v.a)(he,De,function(e,t){var n=t.payload;return Object(f.a)({},e,n)}),Object(v.a)(he,je,function(e,t){t.payload;return Se}),he),Se),Ne=function(e){return e.newDashboardElement},we=n(61),Me=n.n(we),Te=n(59),Ae=n.n(Te),Ce=n(60),Re=n.n(Ce),Le=n(168);function xe(e){var t=e.element,n=e.setMouseCoordinate,a=e.setNewElement,o=e.deleteElement,i=e.newDashboard,l=e.editElement,c=e.instDataObject,s=e.id;return t?r.a.createElement("div",{className:"constructor-element",style:{position:"absolute",left:t.X,top:t.Y},key:s,onMouseMove:function(e){n({X:e.clientX,Y:e.clientY-e.currentTarget.parentElement.getBoundingClientRect().top})}},r.a.createElement("div",{style:{cursor:"move"},className:"text-elem-dashboard-constructor-div",onMouseDown:function(e){0===e.button&&(n({dragX:e.clientX-e.currentTarget.getBoundingClientRect().left,dragY:e.clientY-e.currentTarget.getBoundingClientRect().top}),a(i[s].element),o(s))}},"".concat(t.element.name," : ").concat(t.element.value)),r.a.createElement("div",null,r.a.createElement(Le.a,{className:"edit-elem-button",onClick:function(){var e=prompt("Monitor name:",t.element.name);e&&l({id:s,element:{name:e}})}},r.a.createElement(Ae.a,null))),r.a.createElement("div",null,r.a.createElement(Le.a,{className:"info-elem-button",onClick:function(){alert("\n                    monitor name: ".concat(t.element.name,"\n                    site: ").concat(c[t.element.idSite].siteName,"\n                    parameter: ").concat(c[t.element.idSite][t.element.param].name,"\n                    value example: ").concat(c[t.element.idSite][t.element.param].value))}},r.a.createElement(Re.a,null))),r.a.createElement("div",null,r.a.createElement(Le.a,{className:"delete-elem-button",onClick:function(){window.confirm("Do You want delete element?")&&o(s)}},r.a.createElement(Me.a,null)))):null}function Ie(e){var t=e.size,n=e.setTargetWidget,a=e.id,o=e.deleteElement,i=e.clearWidgetSize,l=e.children;return r.a.createElement("div",{className:"widget-outer-div",style:{position:"absolute",left:t.X,top:t.Y,width:"".concat(t.W,"px"),height:"".concat(t.H,"px"),borderWidth:"1px",borderStyle:"solid",borderColor:"rgb(0,0,0)"},onMouseEnter:function(e){n({id:a}),n(t)}},r.a.createElement("div",{className:"widget-content-div",style:{position:"absolute",left:0,top:"24px",backgroundColor:"#ffff",cursor:"crosshair"}},l),r.a.createElement("div",{className:"top-widget-div",style:{position:"absolute",right:0,top:"0px",height:"24px",width:"100%",cursor:"move"}}),r.a.createElement("div",{className:"bottom-right-corner-widget-div",style:{position:"absolute",right:"-5px",bottom:"-5px",height:"10px",width:"10px",cursor:"nwse-resize"}},r.a.createElement("div",{style:{position:"absolute",bottom:"50%",right:"50%",height:"5px",width:"5px",background:"linear-gradient(to bottom right, rgba(0,0,0,0) 50%, rgba(0,0,0,0) 5%, rgba(0,0,0,1) 45%"}})),r.a.createElement("div",{className:"widget-top-left-buttons-div",style:{position:"absolute",top:0,right:0,display:"flex",zIndex:1e3}},r.a.createElement("div",null,r.a.createElement(Le.a,null,r.a.createElement(Ae.a,null))),r.a.createElement("div",null,r.a.createElement(Le.a,null,r.a.createElement(Re.a,null))),r.a.createElement("div",null,r.a.createElement(Le.a,{className:"delete-elem-button",onClick:function(){window.confirm("Do You want delete element?")&&(o(a),i())}},r.a.createElement(Me.a,null)))))}function ze(e){var t=e.newDashboard,n=e.editElement,a=e.deleteElement,o=e.setMouseCoordinate,i=e.setNewElement,l=e.instDataObject,c=e.setTargetWidget,s=e.clearWidgetSize;return r.a.createElement("div",{className:"dashboard-in-constructor"},r.a.createElement("div",{className:"constructor-help-text",style:{disabled:!0}},r.a.createElement("p",null,"Choose site and parameter to add parameter element."),r.a.createElement("p",null,'Press "Add widget" button to add widget element.'),r.a.createElement("p",null,"To move parameter element hold mouse button and drag."),r.a.createElement("p",null,"To move widget element hold mouse button on top side and drag."),r.a.createElement("p",null,"To scale widget element use botoom and right side or bottom-right corner."),r.a.createElement("p",null,"Saved dashboards are in menu list.")),t.map(function(e,u){return e.delete?null:"widget"===e.element.type?r.a.createElement(Ie,{key:u,id:u,setTargetWidget:c,size:e.element.size,deleteElement:a,clearWidgetSize:s},r.a.createElement("div",null,"Some content....")):r.a.createElement(xe,{element:e,setMouseCoordinate:o,setNewElement:i,deleteElement:a,newDashboard:t,editElement:n,instDataObject:l,id:u,key:u})}))}var _e,ke=n(21),We=Object(O.a)("NEW_DASHBOARD/SET_DASHBOARD_ELEMENT"),Ye=Object(O.a)("NEW_DASHBOARD/SET_DASHBOARD"),Xe=Object(O.a)("NEW_DASHBOARD/EDIT_DASHBOARD_ELEMENT"),He=Object(O.a)("NEW_DASHBOARD/DELETE_DASHBOARD_ELEMENT"),Be=Object(O.a)("NEW_DASHBOARD/CLEAR_DASHBOARD"),Pe=[],Ue=Object(D.a)((_e={},Object(v.a)(_e,We,function(e,t){var n=t.payload;return[].concat(Object(ke.a)(e),[n])}),Object(v.a)(_e,Ye,function(e,t){var n=t.payload;return Object(ke.a)(n)}),Object(v.a)(_e,Be,function(e,t){t.payload;return Pe}),Object(v.a)(_e,Xe,function(e,t){var n=t.payload,a=Object(ke.a)(e);return a[n.id].element=Object(f.a)({},e[n.id].element,n.element),a}),Object(v.a)(_e,He,function(e,t){var n=t.payload,a=Object(ke.a)(e);return a[n].delete=!0,a}),_e),Pe),Ve=function(e){return e.newDashboard};function Ge(e){var t=e.newElement,n=e.coord,a=e.setToNewDashboard,o=e.clearElement,i=e.setMouseCoordinate;return n.in||n.dragX||n.dragY?n.Y<0?null:t===Se?null:r.a.createElement("div",{className:"levitate-element-div",style:{position:"absolute",left:"".concat(n.X-n.dragX,"px"),top:"".concat(n.Y-n.dragY,"px")},onMouseUp:function(e){t.idSite!==Se.idSite&&t.param!==Se.param&&(a({element:t,X:n.X-n.dragX,Y:n.Y-n.dragY}),o()),i({dragX:0,dragY:0})}},t.name||"choose monitor"," : ",t.value||""):null}var Je,qe,Ze=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.setMouseCoordinate,n=e.coord,a=e.newElement,o=e.setToNewDashboard,i=e.clearElement;return r.a.createElement("div",{className:"constructor-field",style:{position:"absolute",top:"0",bottom:"0",width:"100%"},onMouseMove:function(e){t({in:!0,X:e.clientX-e.currentTarget.getBoundingClientRect().left,Y:e.clientY-e.currentTarget.getBoundingClientRect().top})},onMouseEnter:function(e){t({in:!0})},onMouseLeave:function(e){t({in:!1,X:e.clientX,Y:e.clientY-e.currentTarget.getBoundingClientRect().top})}},r.a.createElement(Ge,{setMouseCoordinate:t,coord:n,newElement:a,setToNewDashboard:o,clearElement:i}))}}]),t}(r.a.Component),Ke={setMouseCoordinate:Ee,setToNewDashboard:We,clearElement:je},Fe=Object(g.b)(function(e){return{coord:ve(e),newElement:Ne(e)}},Ke)(Ze),$e="currentWidgetSize",Qe=Object(O.a)("CURRENT_WIDGET_SIZE/SET_SIZE"),et=Object(O.a)("CURRENT_WIDGET_SIZE/CLEAR_SIZE"),tt={X:-100,Y:0,W:50,H:50,resizeX:!1,resizeY:!1,move:!1},nt=Object(D.a)((Je={},Object(v.a)(Je,Qe,function(e,t){var n=t.payload;return Object(f.a)({},e,n)}),Object(v.a)(Je,et,function(e,t){t.payload;return tt}),Je),tt);function at(e){var t=Object(g.c)(),n=Object(g.d)(function(e){return e[$e]}),a=function(){t(Xe({id:n.id,element:{size:{X:n.X,Y:n.Y,H:n.H,W:n.W}}}))};return r.a.createElement("div",{className:"widget-size-outer-div",style:{position:"absolute",left:n.X,top:n.Y,width:"".concat(n.W,"px"),height:"".concat(n.H,"px"),borderWidth:"1px",borderStyle:"solid",borderColor:"rgb(0,0,0)"}},e.children,r.a.createElement("div",{className:"top-move-div",style:{position:"absolute",right:0,top:n.move?"-50px":"0px",height:n.move?"100px":"24px",width:"100%",cursor:"move"},onMouseMove:function(e){if(e.preventDefault(),n.move){var a=e.clientX-n.dX-n.left,o=e.clientY-n.dY-n.top;t(Qe({X:a,Y:o}))}},onMouseDown:function(e){t(Qe({move:!0,dX:e.clientX-e.currentTarget.parentElement.getBoundingClientRect().left,dY:e.clientY-e.currentTarget.parentElement.getBoundingClientRect().top}))},onMouseUp:function(e){t(Qe({move:!1,dY:0,dX:0})),a()},onMouseLeave:function(e){t(Qe({move:!1,dY:0,dX:0})),a()}},r.a.createElement("div",{className:"top-widget-div",style:{position:"absolute",top:n.move?"50%":0,width:"100%",height:"24px"}})),r.a.createElement("div",{className:"right-scale-div",style:{position:"absolute",right:n.resizeX?"-50px":"-5px",top:0,height:"100%",width:n.resizeX?"100px":"10px",cursor:"ew-resize"},onMouseMove:function(e){if(e.preventDefault(),n.resizeX){var a=e.clientX-e.currentTarget.parentElement.getBoundingClientRect().left;t(Qe({W:a}))}},onMouseDown:function(e){t(Qe({resizeX:!0}))},onMouseUp:function(e){t(Qe({resizeX:!1})),a()},onMouseLeave:function(e){t(Qe({resizeX:!1})),a()}}),r.a.createElement("div",{className:"bottom-scale-div",style:{position:"absolute",bottom:n.resizeY?"-50px":"-5px",height:n.resizeY?"100px":"10px",width:"100%",cursor:"ns-resize"},onMouseMove:function(e){if(e.preventDefault(),n.resizeY){var a=e.clientY-e.currentTarget.parentElement.getBoundingClientRect().top;t(Qe({H:a}))}},onMouseDown:function(e){t(Qe({resizeY:!0}))},onMouseUp:function(e){t(Qe({resizeY:!1})),a()},onMouseLeave:function(e){t(Qe({resizeY:!1})),a()}}),r.a.createElement("div",{className:"bottom-right-corner-scale-div",style:{position:"absolute",right:n.resizeY&&n.resizeX?"-50px":"-5px",bottom:n.resizeY&&n.resizeX?"-50px":"-5px",height:n.resizeY&&n.resizeX?"100px":"10px",width:n.resizeY&&n.resizeX?"100px":"10px",cursor:"nwse-resize"},onMouseMove:function(e){if(e.preventDefault(),n.resizeY&&n.resizeX){var a=e.clientX-e.currentTarget.parentElement.getBoundingClientRect().left,o=e.clientY-e.currentTarget.parentElement.getBoundingClientRect().top;t(Qe({W:a,H:o}))}},onMouseDown:function(e){t(Qe({resizeX:!0,resizeY:!0}))},onMouseUp:function(e){t(Qe({resizeX:!1,resizeY:!1})),a()},onMouseLeave:function(e){t(Qe({resizeX:!1,resizeY:!1})),a()}},r.a.createElement("div",{style:{position:"absolute",bottom:"50%",right:"50%",height:"5px",width:"5px",background:"linear-gradient(to bottom right, rgba(0,0,0,0) 50%, rgba(0,0,0,0) 5%, rgba(0,0,0,1) 45%"}})))}var ot,rt=Object(O.a)("DASHBOARDS/SET_DASHBOARD"),it=Object(O.a)("DASHBOARDS/LOAD_DASHBOARDS"),lt=(Object(O.a)("DASHBOARDS/EDIT_DASHBOARD"),Object(O.a)("DASHBOARDS/DELETE_DASHBOARD")),ct=Object(D.a)((qe={},Object(v.a)(qe,rt,function(e,t){var n=t.payload,a=Object(ke.a)(e);return a[n.id]=Object(f.a)({},n),a}),Object(v.a)(qe,it,function(e,t){var n=t.payload;return Object(ke.a)(n)}),Object(v.a)(qe,lt,function(e,t){var n=t.payload,a=Object(ke.a)(e);return a[n]="",a}),qe),[]),st=function(e){return e.dashboards},ut=Object(O.a)("DASHBOARD_NAME/SET_NAME"),dt=Object(O.a)("DASHBOARD_NAME/CLEAR_NAME"),mt=Object(D.a)((ot={},Object(v.a)(ot,ut,function(e,t){return t.payload}),Object(v.a)(ot,dt,function(e,t){t.payload;return"newDashboard"}),ot),"newDashboard"),pt=function(e){return e.dashboardName},bt=n(62),ht=n.n(bt);function Et(){return{element:{type:"widget",size:{X:0,Y:0,H:100,W:200}},X:0,Y:0}}var gt=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).upperDiv=Object(o.createRef)(),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.urlParam=ht.a.parse(this.props.location.search),this.urlParam.id&&this.props.dashboards[this.urlParam.id]?(this.urlParam.valid=!0,this.props.setNewDashboard(this.props.dashboards[this.urlParam.id].dashboard),this.props.setDashboardName(this.props.dashboards[this.urlParam.id].name)):(this.props.setDashboardName("Dashboard #".concat(this.props.dashboards.length)),this.props.clearNewDashboard())}},{key:"componentDidMount",value:function(){this.props.isLogin.islogin&&this.props.setWidgetSize({left:this.upperDiv.current.offsetLeft,top:this.upperDiv.current.offsetTop})}},{key:"componentDidUpdate",value:function(){this.props.isLogin.islogin&&this.props.setWidgetSize({left:this.upperDiv.current.offsetLeft,top:this.upperDiv.current.offsetTop})}},{key:"componentWillUnmount",value:function(){this.props.clearNewDashboard(),this.props.clearWidgetSize()}},{key:"render",value:function(){var e=this,t=this.props,n=t.setMouseCoordinate,a=t.isLogin,o=t.installationResponce,i=t.setNewElement,l=t.newElement,c=t.newDashboard,s=t.setToNewDashboard,u=t.editElement,d=t.deleteElement,m=t.setDashboard,p=t.dashboardName,b=t.setDashboardName,h=t.dashboards,E=t.instDataObject,g=t.setTargetWidget,v=t.clearWidgetSize;return a.islogin?r.a.createElement("div",{className:"constructor"},r.a.createElement("div",{className:"element-select-div",style:{width:"100%"}},o.data&&o.data.records?r.a.createElement(function(){return r.a.createElement(fe.a,{native:!0,inputProps:{style:{width:"25"}},input:r.a.createElement(Oe.a,null),color:"primary",name:"site-select",value:l.idSite,onChange:function(e){var t=e.target.value;"-"!==t&&i({idSite:t})}},r.a.createElement("option",{key:"null",value:"-",hidden:!0},"Choose site"),o.data.records.map(function(e){return r.a.createElement("option",{key:e.idSite,value:e.idSite},e.name)}))},null):r.a.createElement("div",null,"Loading..."),o.data&&o.data.records?r.a.createElement(function(){return r.a.createElement(fe.a,{native:!0,inputProps:{style:{width:"25"}},input:r.a.createElement(Oe.a,null),color:"primary",name:"param-select",value:l.param,onChange:function(e){var t=e.target.value;l.idSite!==Se.idSite&&t!==Se.param&&i({param:t,paramName:E[l.idSite][t].name,value:E[l.idSite][t].value,name:"".concat(E[l.idSite].siteName," ").concat(E[l.idSite][t].name)})}},r.a.createElement("option",{key:"null",value:"-",hidden:!0},l.idSite===Se.idSite?"Choose site first":"Choose parameter"),function(e,t){var n=[];for(var a in e[t])n.push({id:a,name:e[t][a].name,value:e[t][a].value});return n}(E,l.idSite).map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))},null):null,r.a.createElement(Oe.a,{inputProps:{style:{width:"-webkit-fill-available"}},placeholder:"Edit parameter name",value:l.name||"",onChange:function(e){var t=e.target.value;i({name:t})}}),r.a.createElement(A.a,{variant:"outlined",color:"secondary",style:{marginLeft:"10px"},onClick:function(){s(new Et)}},"Add widget")),r.a.createElement("div",{ref:this.upperDiv,className:"constructor-box",id:"constructor-box",style:{position:"relative",height:"100vh"}},r.a.createElement(Fe,null),r.a.createElement(ze,{newDashboard:c,editElement:u,deleteElement:d,setMouseCoordinate:n,setNewElement:i,instDataObject:E,setTargetWidget:g,clearWidgetSize:v}),r.a.createElement(at,null)),r.a.createElement("div",{style:{position:"fixed",left:"5px",bottom:"5px",zIndex:"100"}},r.a.createElement(T.a,{color:"primary",onChange:function(e){var t=e.target.value;return b(t)},value:p}),r.a.createElement(A.a,{onClick:function(){var t=c.filter(function(e){return!1===e.delete||void 0===e.delete});m({dashboard:t,name:p,id:e.urlParam.valid?e.urlParam.id:h.length}),alert('Dashboard "'.concat(p,'" saved. You can find it in main Menu.'))}},"Save dashboard"))):r.a.createElement("div",{className:"inner-warning"},"Please login first!")}}]),t}(r.a.Component),vt={setMouseCoordinate:Ee,setNewElement:De,setToNewDashboard:We,editElement:Xe,deleteElement:He,clearElement:je,setDashboardName:ut,setDashboard:rt,clearNewDashboard:Be,setNewDashboard:Ye,setWidgetSize:Qe,setTargetWidget:Qe,clearWidgetSize:et},ft=Object(g.b)(function(e){return{isLogin:M(e),installationResponce:W(e),newElement:Ne(e),newDashboard:Ve(e),dashboards:st(e),dashboardName:pt(e),instDataObject:B(e)}},vt)(gt),Ot=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillUnmount",value:function(){clearInterval(Z),clearTimeout(Z)}},{key:"componentWillMount",value:function(){this.props.updateInstallations(this.props.isLogin,1e4)}},{key:"render",value:function(){var e=this,t=this.props,n=t.dashboards,a=t.deleteDashboard,o=t.instDataObject,i=ht.a.parse(this.props.location.search);return i.id&&n[i.id]?r.a.createElement("div",{style:{position:"static"}},r.a.createElement("div",{className:"dashboard",style:{position:"relative"}},n[i.id].dashboard.map(function(e,t){return""===e?null:"widget"===e.element.type?r.a.createElement("div",{key:t,id:t,style:{position:"absolute",left:e.element.size.X,top:e.element.size.Y,height:e.element.size.H,width:e.element.size.W,borderColor:"rgba(0, 0, 0, 255)",borderWidth:"1px",borderStyle:"solid"}},r.a.createElement("div",null,"Some content....")):r.a.createElement("div",{key:t,style:{position:"absolute",left:e.X,top:e.Y}},"".concat(e.element.name," : \n                            ").concat(o[e.element.idSite]&&o[e.element.idSite][e.element.param]?o[e.element.idSite][e.element.param].value:"---"))})),r.a.createElement("div",{style:{position:"fixed",left:"5px",bottom:"5px"}},r.a.createElement(A.a,{onClick:function(){e.props.history.push("/newdashboard/?id=".concat(i.id))}},"Change dashboard"),r.a.createElement(A.a,{onClick:function(){window.confirm("Do you really want to delete dashboard?")&&(a(i.id),e.props.history.push("/"))}},"Delete dashboard"))):n.map(function(e,t){return e?r.a.createElement(h.b,{key:t,to:"/dashboards/?id=".concat(e.id)},r.a.createElement("div",null,e.name)):null})}}]),t}(r.a.Component),Dt={setInstallations:_,deleteDashboard:lt,setInstallationObjectData:X,updateInstallations:K},jt=Object(g.b)(function(e){return{dashboards:st(e),installationsResponce:W(e),isLogin:M(e),instDataObject:B(e)}},Dt)(Ot),St=Object(O.a)("HIDE_MAIN_MENU/TOGGLE_MAIN_MENU"),yt=Object(D.a)(Object(v.a)({},St,function(e,t){t.payload;return!e}),!0),Nt=function(e){return e.hideMainMenu},wt=Object(O.a)("READ_LOCAL_STORAGE/READ_LOCAL_STORAGE"),Mt=Object(b.a)({palette:{primary:me.a,secondary:pe.a}}),Tt=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"404 Error: Page not found"),r.a.createElement(h.b,{to:"/sites"},"Go to main"))},At=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.props.readLocalStorage("some");var e=localStorage.getItem("loginVRM"),t=localStorage.getItem("installationsVRM"),n=localStorage.getItem("dashboards"),a=localStorage.getItem("installationsObjectData");e&&this.props.setIsLogin(JSON.parse(e)),t&&this.props.setInst(JSON.parse(t)),n&&this.props.setDashboards(JSON.parse(n)),a&&this.props.setInstallationObjectData(JSON.parse(a))}},{key:"render",value:function(){var e=this.props,t=e.dashboards,n=e.hideMainMenu,a=e.toggleHide,o=e.setDashboardName,i=e.clearNewDashboard,l=e.clearWidgetSize;return r.a.createElement(p.a,{theme:Mt},r.a.createElement("div",{style:{position:"fixed",top:"5px",right:"10px"}},r.a.createElement("h1",null,"PV monitor V1.0.0")),r.a.createElement("div",{className:"app"},r.a.createElement(h.a,{basename:"/PVM"},r.a.createElement("div",{className:"head"},r.a.createElement(be,{dashboards:t,toggleHide:a,hide:n,setDashboardName:o,clearNewDashboard:i,clearWidgetSize:l}),r.a.createElement(Q,null)),r.a.createElement(E.d,null,r.a.createElement(E.b,{exact:!0,path:"/",component:de}),r.a.createElement(E.b,{path:"/sites",component:de}),r.a.createElement(E.b,{path:"/dashboards",component:jt}),r.a.createElement(E.b,{path:"/newdashboard",component:ft}),r.a.createElement(E.b,{component:Tt})))))}}]),t}(r.a.Component),Ct={setIsLogin:y,setInst:_,setDashboards:it,toggleHide:St,setInstallationObjectData:X,setDashboardName:ut,clearNewDashboard:Be,clearWidgetSize:et,readLocalStorage:wt},Rt=Object(g.b)(function(e){return{dashboards:st(e),hideMainMenu:Nt(e)}},Ct)(At);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Lt,xt=n(46),It={loginVRM:w,installationsVRM:k,selectedInst:le,installationsObjectData:H,mouseCoordinates:ge,newDashboardElement:ye,newDashboard:Ue,dashboards:ct,dashboardName:mt,hideMainMenu:yt,currentWidgetSize:nt},zt=n(89);var _t=(Lt={},Object(v.a)(Lt,"LOGIN_VRM/SET_ISNTLOGIN","loginVRM"),Object(v.a)(Lt,j,"loginVRM"),Object(v.a)(Lt,z,"installationsVRM"),Object(v.a)(Lt,Y,"installationsObjectData"),Object(v.a)(Lt,"DASHBOARDS/SET_DASHBOARD","dashboards"),Lt),kt=[z,"LOGIN_VRM/SET_ISNTLOGIN",j,Y,"DASHBOARDS/SET_DASHBOARD"],Wt=function(e){return function(t){return function(n){var a,o,r=t(n),i=e.getState();return-1!==kt.indexOf(n.type)&&(a=_t[n.type],o=JSON.stringify(i[_t[n.type]]),localStorage.setItem(a,o)),r}}},Yt=function(e){return function(e){return function(t){var n=e(t);return t.type,n}}},Xt=function(){return[zt.a,Wt,Yt]};n.d(t,"store",function(){return Pt});var Ht,Bt,Pt=(Ht=It,Bt=Xt(),Object(xt.d)(Object(xt.c)(Ht),{},xt.a.apply(void 0,Object(ke.a)(Bt))));l.a.render(r.a.createElement(function(){return r.a.createElement(g.a,{store:Pt},r.a.createElement(Rt,null))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},94:function(e,t,n){e.exports=n(135)},99:function(e,t,n){}},[[94,1,2]]]);
//# sourceMappingURL=main.dfa464ce.chunk.js.map