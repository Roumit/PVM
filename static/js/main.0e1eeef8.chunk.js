(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{133:function(e,t,n){"use strict";n.r(t);var a,o,r=n(0),i=n.n(r),l=n(9),c=n.n(l),s=(n(97),n(18)),d=n(13),u=n(20),m=n(19),p=n(21),b=(n(98),n(169)),h=n(88),g=n(33),E=n(30),v=n(12),f=n(5),O=n(174),D=n(171),j=Object(O.a)("LOGIN_FIELD/SET_SWITH"),y=Object(D.a)(Object(f.a)({},j,function(e,t){t.payload;return!e}),!0),N=function(e){return e.loginField},S=Object(O.a)("LOGIN_INPUT/SET_LOGIN"),w=Object(O.a)("LOGIN_INPUT/ET_PAROL"),I=Object(O.a)("LOGIN_INPUT/CLEAR_PASS"),M={login:"175.com.ua@gmail.com",pass:"Ww9TArkV!dndv53"},T={login:"",pass:""},A=Object(D.a)((a={},Object(f.a)(a,S,function(e,t){return{login:t.payload,pass:e.pass}}),Object(f.a)(a,w,function(e,t){var n=t.payload;return{login:e.login,pass:n}}),Object(f.a)(a,I,function(e,t){t.payload;return T}),a),M),C=function(e){return e.loginInput},L="LOGIN_VRM/SET_TOKEN",R=Object(O.a)("LOGIN_VRM/SET_ISNTLOGIN"),x=Object(O.a)(L),_={islogin:!1,username:"",idUser:null,headerWithToken:{}},k=Object(D.a)((o={},Object(f.a)(o,R,function(e,t){t.payload;return _}),Object(f.a)(o,x,function(e,t){return t.payload}),o),_),z=function(e){return e.loginVRM},W=n(65),Y=n.n(W),X="INSTALLATIONS_VRM/SET_INSTALLATIONS",H=Object(O.a)(X),B=Object(D.a)(Object(f.a)({},H,function(e,t){return t.payload}),{data:{success:!1}}),P=function(e){return e.installationsVRM},U="INSTALLATIONS_OBJECT_DATA/SET_DATA",V=Object(O.a)(U),G=Object(D.a)(Object(f.a)({},V,function(e,t){return t.payload}),{}),J=function(e){return e.installationsObjectData},F="https://vrmapi.victronenergy.com",Z="/v2/auth/login";var K=$(function(e){return"".concat(F,"/v2/users/").concat(e,"/installations?extended=1")});$(function(e){return"".concat(F,"/v2/installations/").concat(e,"/system-overview")});function $(e){return function(t,n){return new Promise(function(a,o){Y()({method:"get",url:e(t),headers:n}).then(function(e){a(e)}).catch(function(e){o(e)})})}}function q(){var e=C(an.getState());return new Promise(function(t,n){Y()({method:"post",url:F+Z,data:'{"username": "'.concat(e.login,'", "password": "').concat(e.pass,'"}')}).then(function(n){if(200===n.status){var a={"X-Authorization":"Bearer "+n.data.token},o=n.data.idUser;an.dispatch(j());var r={islogin:!0,username:e.login,idUser:o,headerWithToken:a};K(r.idUser,r.headerWithToken).then(function(e){an.dispatch(x(r)),an.dispatch(H(e)),e.data&&e.data.records&&Q(e)}),t(!0)}}).catch(function(e){return console.log("login error: ".concat(e)),null})})}function Q(e){var t={};return e.data.records.map(function(e){var n={siteName:e.name};return e.extended.map(function(e){return n[e.idDataAttribute||e.code]={name:e.description,value:e.formattedValue},null}),t[e.idSite]=n,null}),an.dispatch(V(t)),t}var ee=null;function te(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;ee=setTimeout(function(){ee=setInterval(function(){e.islogin&&K(e.idUser,e.headerWithToken).then(function(e){t(e),n&&Q(e)})},a)},a)}var ne=n(172),ae=n(165),oe=i.a.createRef(),re=function(e){var t=e.isActive,n=e.onChangeLogin,a=e.onChangeParol,o=e.loginPass;return t?i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement(ne.a,{autoFocus:!0,placeholder:"login or email:",onChange:function(e){var t=e.target.value;return console.log(t)||n(t)},onKeyDown:function(e){13===e.keyCode&&oe.current.focus()},value:o.login})),i.a.createElement("div",null,i.a.createElement(ne.a,{inputRef:oe,type:"password",placeholder:"password",onChange:function(e){var t=e.target.value;return a(t)},onKeyDown:function(e){13===e.keyCode&&q()},value:o.pass})),i.a.createElement("div",null,i.a.createElement(ae.a,{color:"primary",onClick:function(){return q()}},"Login"))):null},ie=function(e){var t=e.isLogin,n=e.logout;return t.islogin?i.a.createElement("div",null,i.a.createElement("div",null,t.username),i.a.createElement("div",null,i.a.createElement(ae.a,{color:"secondary",onClick:n},"Exit"))):null},le=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.showLogin,n=e.isActive,a=e.onChangeLogin,o=e.onChangeParol,r=e.loginPass,l=e.isLogin,c=e.logout;return i.a.createElement("div",{className:"login"},i.a.createElement("div",null,i.a.createElement(ae.a,{color:"secondary",onClick:function(){return t(n)}},"Login")),i.a.createElement(re,{isActive:n,onChangeLogin:a,onChangeParol:o,loginPass:r}),i.a.createElement("div",null,i.a.createElement(ie,{isLogin:l,logout:c})))}}]),t}(i.a.Component),ce={showLogin:j,onChangeLogin:S,onChangeParol:w,logout:R,setInstallationObjectData:V},se=Object(v.b)(function(e){return{isActive:N(e),loginPass:C(e),isLogin:z(e)}},ce)(le),de=function(e){var t=new Date(1e3*e.last_timestamp),n=t.getFullYear(),a=t.getMonth()+1>9?t.getMonth()+1:"0"+(t.getMonth()+1),o=t.getDate()>9?t.getDate():"0"+t.getDate(),r=t.getHours()>9?t.getHours():"0"+t.getHours(),i=t.getMinutes()>9?t.getMinutes():"0"+t.getMinutes();return!0===e.alarm?"".concat(e.name," ( last connect: ").concat(r,":").concat(i," ").concat(o,".").concat(a,".").concat(n," ) !alarm!"):"".concat(e.name," ( last connect: ").concat(r,":").concat(i," ").concat(o,".").concat(a,".").concat(n," )")},ue=[143,215],me=["consumption","solar_yield","from_to_grid"],pe=function(e){var t=e.extended,n=t.filter(function(e){return-1!==ue.indexOf(e.idDataAttribute)}),a=t.filter(function(e){return-1!==me.indexOf(e.code)}),o=n.concat(a);return i.a.createElement("div",{className:"small-site-data"},o.map(function(e){return i.a.createElement("div",{key:e.idDataAttribute||e.code},e.description," ",e.formattedValue)}))},be=function(e){var t=e.site,n=e.selectInst,a=e.selectedInst;e.isLogin;return t.idSite===a?i.a.createElement("div",null,i.a.createElement(ae.a,{color:"primary",disabled:!0},de(t)),i.a.createElement(pe,{extended:t.extended})):i.a.createElement("div",null,i.a.createElement(ae.a,{color:"primary",onClick:function(){n(t.idSite)}},de(t)))},he=function(e){var t=e.installationResponce,n=e.selectInst,a=e.selectedInst,o=e.isLogin;return t&&t.data.success?i.a.createElement("div",{className:"installation-menu"},t.data.records.map(function(e){return i.a.createElement("div",{key:e.idSite},i.a.createElement(be,{site:e,selectInst:n,selectedInst:a,isLogin:o}))})):i.a.createElement("div",null,"Can`t receive installations list")},ge=Object(O.a)("SELECTED_INST/SET_INST"),Ee=Object(D.a)(Object(f.a)({},ge,function(e,t){return t.payload}),null),ve=function(e){return e.selectedInst},fe=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props;e.id;return e.instData.data.success?i.a.createElement("div",{className:"installation-details"}):null}}]),t}(i.a.Component),Oe=Object(v.b)(function(e){return{id:ve(e),instData:P(e)}},{})(fe),De=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentWillUnmount",value:function(){clearInterval(ee),clearTimeout(ee)}},{key:"componentWillMount",value:function(){te(this.props.isLogin,this.props.setInstallations,this.props.setInstallationObjectData)}},{key:"render",value:function(){var e=this.props,t=e.isLogin,n=e.installationResponce,a=e.selectInst,o=e.selectedInst;return t.islogin?i.a.createElement("div",{className:"installations"},i.a.createElement(E.a,{push:!0,to:"/sites"}),i.a.createElement(he,{installationResponce:n,selectInst:a,selectedInst:o,isLogin:t}),i.a.createElement(Oe,null)):i.a.createElement("div",{className:"inner-warning"},"Please login first!")}}]),t}(i.a.Component),je={selectInst:ge,setInstallations:H,setInstallationObjectData:V},ye=Object(v.b)(function(e){return{isLogin:z(e),installationResponce:P(e),selectedInst:ve(e)}},je)(De),Ne=n(167),Se=n(168);function we(e){var t=e.dashboards,n=e.hide,a=e.toggleHide,o=e.setDashboardId,r=e.setDashboardName,l=e.clearNewDashboard,c=e.clearWidgetSize;return n?i.a.createElement("div",{className:"main-menu-conteiner"},i.a.createElement(ae.a,{color:"primary",className:"main-menu-button",onClick:a},"Menu")):i.a.createElement("div",{className:"main-menu-conteiner",onMouseLeave:a},i.a.createElement(ae.a,{color:"primary",className:"main-menu-button",onClick:a},"hide menu"),i.a.createElement("div",{className:"main-menu"},i.a.createElement(g.b,{to:"/sites",onClick:a},i.a.createElement("div",{className:"main-menu-base-elem"},"Go to main")),t.map(function(e,t){return e?i.a.createElement(g.b,{key:t,to:"/dashboards/?id=".concat(e.id),onClick:a},i.a.createElement("div",{className:"main-menu-elem"},e.name)):null}),i.a.createElement(g.b,{to:"/newdashboard",onClick:function(){a(),o(t.length),r("Dashboard #".concat(t.length)),l(),c()}},i.a.createElement("div",{className:"main-menu-base-elem"},"Create Dashboard"))))}var Ie,Me=Object(O.a)("MOUSE_COORD/SET_COORD"),Te=Object(D.a)(Object(f.a)({},Me,function(e,t){var n=t.payload,a=Object.assign({},e);for(var o in n)a[o]=n[o];return a}),{in:!0,X:0,Y:0,dragX:0,dragY:0}),Ae=function(e){return e.mouseCoordinates},Ce=n(170),Le=n(173),Re=Object(O.a)("NEW_ELEMENT/SET_ELEMENT"),xe=Object(O.a)("NEW_ELEMENT/CLEAR_ELEMENT"),_e={type:"param",idSite:"-",param:"-"},ke=Object(D.a)((Ie={},Object(f.a)(Ie,Re,function(e,t){var n=t.payload,a=Object.assign({},e);for(var o in n)a[o]=n[o];return a}),Object(f.a)(Ie,xe,function(e,t){t.payload;return _e}),Ie),_e),ze=function(e){return e.newDashboardElement},We=n(60),Ye=n.n(We),Xe=n(58),He=n.n(Xe),Be=n(59),Pe=n.n(Be),Ue=n(166);function Ve(e){var t=e.element,n=e.setMouseCoordinate,a=e.setNewElement,o=e.deleteElement,r=e.newDashboard,l=e.editElement,c=e.instDataObject,s=e.id;return t?i.a.createElement("div",{className:"constructor-element",style:{position:"absolute",left:t.X,top:t.Y},key:s,onMouseMove:function(e){n({X:e.clientX,Y:e.clientY-e.currentTarget.parentElement.getBoundingClientRect().top})}},i.a.createElement("div",{style:{cursor:"move"},className:"text-elem-dashboard-constructor-div",onMouseDown:function(e){0===e.button&&(n({dragX:e.clientX-e.currentTarget.getBoundingClientRect().left,dragY:e.clientY-e.currentTarget.getBoundingClientRect().top}),a(r[s].element),o(s))}},"".concat(t.element.name," : ").concat(t.element.value)),i.a.createElement("div",null,i.a.createElement(Ue.a,{className:"edit-elem-button",onClick:function(){var e=prompt("Monitor name:",t.element.name);e&&l({id:s,element:{name:e}})}},i.a.createElement(He.a,null))),i.a.createElement("div",null,i.a.createElement(Ue.a,{className:"info-elem-button",onClick:function(){alert("\n                    monitor name: ".concat(t.element.name,"\n                    site: ").concat(c[t.element.idSite].siteName,"\n                    parameter: ").concat(c[t.element.idSite][t.element.param].name,"\n                    value example: ").concat(c[t.element.idSite][t.element.param].value))}},i.a.createElement(Pe.a,null))),i.a.createElement("div",null,i.a.createElement(Ue.a,{className:"delete-elem-button",onClick:function(){window.confirm("Do You want delete element?")&&o(s)}},i.a.createElement(Ye.a,null)))):null}function Ge(e){var t=e.size,n=e.setTargetWidget,a=e.id,o=e.deleteElement,r=e.clearWidgetSize,l=e.children;return i.a.createElement("div",{className:"widget-outer-div",style:{position:"absolute",left:t.X,top:t.Y,width:"".concat(t.W,"px"),height:"".concat(t.H,"px"),borderWidth:"1px",borderStyle:"solid",borderColor:"rgb(0,0,0)"},onMouseEnter:function(e){n({id:a}),n(t)}},i.a.createElement("div",{className:"widget-content-div",style:{position:"absolute",left:0,top:"24px",backgroundColor:"#ffff",cursor:"crosshair"}},l),i.a.createElement("div",{className:"top-widget-div",style:{position:"absolute",right:0,top:"0px",height:"24px",width:"100%",backgroundColor:"rgba(0,0,0,0.1)",cursor:"move"}}),i.a.createElement("div",{className:"bottom-right-corner-widget-div",style:{position:"absolute",right:"-5px",bottom:"-5px",height:"10px",width:"10px",cursor:"nwse-resize"}},i.a.createElement("div",{style:{position:"absolute",bottom:"50%",right:"50%",height:"5px",width:"5px",background:"linear-gradient(to bottom right, rgba(0,0,0,0) 50%, rgba(0,0,0,0) 5%, rgba(0,0,0,1) 45%"}})),i.a.createElement("div",{className:"widget-top-left-buttons-div",style:{position:"absolute",top:0,right:0,display:"flex",zIndex:1e3}},i.a.createElement("div",null,i.a.createElement(Ue.a,null,i.a.createElement(He.a,null))),i.a.createElement("div",null,i.a.createElement(Ue.a,null,i.a.createElement(Pe.a,null))),i.a.createElement("div",null,i.a.createElement(Ue.a,{className:"delete-elem-button",onClick:function(){window.confirm("Do You want delete element?")&&(o(a),r())}},i.a.createElement(Ye.a,null)))))}function Je(e){var t=e.newDashboard,n=e.editElement,a=e.deleteElement,o=e.setMouseCoordinate,r=e.setNewElement,l=e.instDataObject,c=e.setTargetWidget,s=e.clearWidgetSize;return i.a.createElement("div",{className:"dashboard-in-constructor"},i.a.createElement("div",{className:"constructor-help-text",style:{disabled:!0}},i.a.createElement("p",null,"Choose site and parameter to add parameter element."),i.a.createElement("p",null,'Press "Add widget" button to add widget element.'),i.a.createElement("p",null,"To move parameter element hold mouse button and drag."),i.a.createElement("p",null,"To move widget element hold mouse button on top side and drag."),i.a.createElement("p",null,"To scale widget element use botoom and right side or bottom-right corner."),i.a.createElement("p",null,"Saved dashboards are in menu list.")),t.map(function(e,d){return e.delete?null:"widget"===e.element.type?i.a.createElement(Ge,{key:d,id:d,setTargetWidget:c,size:e.element.size,deleteElement:a,clearWidgetSize:s},i.a.createElement("div",null,"Some content....")):i.a.createElement(Ve,{element:e,setMouseCoordinate:o,setNewElement:r,deleteElement:a,newDashboard:t,editElement:n,instDataObject:l,id:d,key:d})}))}var Fe,Ze=n(28),Ke=Object(O.a)("NEW_DASHBOARD/SET_DASHBOARD_ELEMENT"),$e=Object(O.a)("NEW_DASHBOARD/SET_DASHBOARD"),qe=Object(O.a)("NEW_DASHBOARD/EDIT_DASHBOARD_ELEMENT"),Qe=Object(O.a)("NEW_DASHBOARD/DELETE_DASHBOARD_ELEMENT"),et=Object(O.a)("NEW_DASHBOARD/CLEAR_DASHBOARD"),tt=[],nt=Object(D.a)((Fe={},Object(f.a)(Fe,Ke,function(e,t){var n=t.payload;return[].concat(Object(Ze.a)(e),[n])}),Object(f.a)(Fe,$e,function(e,t){return t.payload}),Object(f.a)(Fe,et,function(e,t){t.payload;return tt}),Object(f.a)(Fe,qe,function(e,t){var n=t.payload,a=Object(Ze.a)(e);for(var o in n.element)a[n.id].element[o]=n.element[o];return a}),Object(f.a)(Fe,Qe,function(e,t){var n=t.payload,a=Object(Ze.a)(e);return a[n].delete=!0,a}),Fe),tt),at=function(e){return e.newDashboard};function ot(e){var t=e.newElement,n=e.coord,a=e.setToNewDashboard,o=e.clearElement,r=e.setMouseCoordinate;return n.in||n.dragX||n.dragY?n.Y<0?null:t===_e?null:i.a.createElement("div",{className:"levitate-element-div",style:{position:"absolute",left:"".concat(n.X-n.dragX,"px"),top:"".concat(n.Y-n.dragY,"px")},onMouseUp:function(e){t.idSite!==_e.idSite&&t.param!==_e.param&&(a({element:t,X:n.X-n.dragX,Y:n.Y-n.dragY}),o()),r({dragX:0,dragY:0})}},t.name||"choose monitor"," : ",t.value||""):null}var rt,it,lt=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.setMouseCoordinate,n=e.coord,a=e.newElement,o=e.setToNewDashboard,r=e.clearElement;return i.a.createElement("div",{className:"constructor-field",style:{position:"absolute",top:"0",bottom:"0",width:"100%"},onMouseMove:function(e){t({in:!0,X:e.clientX-e.currentTarget.getBoundingClientRect().left,Y:e.clientY-e.currentTarget.getBoundingClientRect().top})},onMouseEnter:function(e){t({in:!0})},onMouseLeave:function(e){t({in:!1,X:e.clientX,Y:e.clientY-e.currentTarget.getBoundingClientRect().top})}},i.a.createElement(ot,{setMouseCoordinate:t,coord:n,newElement:a,setToNewDashboard:o,clearElement:r}))}}]),t}(i.a.Component),ct={setMouseCoordinate:Me,setToNewDashboard:Ke,clearElement:xe},st=Object(v.b)(function(e){return{coord:Ae(e),newElement:ze(e)}},ct)(lt),dt="currentWidgetSize",ut=Object(O.a)("CURRENT_WIDGET_SIZE/SET_SIZE"),mt=Object(O.a)("CURRENT_WIDGET_SIZE/CLEAR_SIZE"),pt={X:-100,Y:0,W:50,H:50,resizeX:!1,resizeY:!1,move:!1},bt=Object(D.a)((rt={},Object(f.a)(rt,ut,function(e,t){var n=t.payload,a=Object.assign({},e);for(var o in n)a[o]=n[o];return a}),Object(f.a)(rt,mt,function(e,t){t.payload;return pt}),rt),pt);function ht(e){var t=Object(v.c)(),n=Object(v.d)(function(e){return e[dt]}),a=function(){t(qe({id:n.id,element:{size:{X:n.X,Y:n.Y,H:n.H,W:n.W}}}))};return i.a.createElement("div",{className:"widget-size-outer-div",style:{position:"absolute",left:n.X,top:n.Y,width:"".concat(n.W,"px"),height:"".concat(n.H,"px"),borderWidth:"1px",borderStyle:"solid",borderColor:"rgb(0,0,0)"}},e.children,i.a.createElement("div",{className:"top-move-div",style:{position:"absolute",right:0,top:n.move?"-50px":"0px",height:n.move?"100px":"24px",width:"100%",cursor:"move"},onMouseMove:function(e){if(e.preventDefault(),n.move){var a=e.clientX-n.dX-n.left,o=e.clientY-n.dY-n.top;t(ut({X:a,Y:o}))}},onMouseDown:function(e){t(ut({move:!0,dX:e.clientX-e.currentTarget.parentElement.getBoundingClientRect().left,dY:e.clientY-e.currentTarget.parentElement.getBoundingClientRect().top}))},onMouseUp:function(e){t(ut({move:!1,dY:0,dX:0})),a()},onMouseLeave:function(e){t(ut({move:!1,dY:0,dX:0})),a()}},i.a.createElement("div",{style:{position:"absolute",top:n.move?"50%":0,width:"100%",height:"24px",backgroundColor:"rgba(0,0,0,0.1)"}})),i.a.createElement("div",{className:"right-scale-div",style:{position:"absolute",right:n.resizeX?"-50px":"-5px",top:0,height:"100%",width:n.resizeX?"100px":"10px",cursor:"ew-resize"},onMouseMove:function(e){if(e.preventDefault(),n.resizeX){var a=e.clientX-e.currentTarget.parentElement.getBoundingClientRect().left;t(ut({W:a}))}},onMouseDown:function(e){t(ut({resizeX:!0}))},onMouseUp:function(e){t(ut({resizeX:!1})),a()},onMouseLeave:function(e){t(ut({resizeX:!1})),a()}}),i.a.createElement("div",{className:"bottom-scale-div",style:{position:"absolute",bottom:n.resizeY?"-50px":"-5px",height:n.resizeY?"100px":"10px",width:"100%",cursor:"ns-resize"},onMouseMove:function(e){if(e.preventDefault(),n.resizeY){var a=e.clientY-e.currentTarget.parentElement.getBoundingClientRect().top;t(ut({H:a}))}},onMouseDown:function(e){t(ut({resizeY:!0}))},onMouseUp:function(e){t(ut({resizeY:!1})),a()},onMouseLeave:function(e){t(ut({resizeY:!1})),a()}}),i.a.createElement("div",{className:"bottom-right-corner-scale-div",style:{position:"absolute",right:n.resizeY&&n.resizeX?"-50px":"-5px",bottom:n.resizeY&&n.resizeX?"-50px":"-5px",height:n.resizeY&&n.resizeX?"100px":"10px",width:n.resizeY&&n.resizeX?"100px":"10px",cursor:"nwse-resize"},onMouseMove:function(e){if(e.preventDefault(),n.resizeY&&n.resizeX){var a=e.clientX-e.currentTarget.parentElement.getBoundingClientRect().left,o=e.clientY-e.currentTarget.parentElement.getBoundingClientRect().top;t(ut({W:a,H:o}))}},onMouseDown:function(e){t(ut({resizeX:!0,resizeY:!0}))},onMouseUp:function(e){t(ut({resizeX:!1,resizeY:!1})),a()},onMouseLeave:function(e){t(ut({resizeX:!1,resizeY:!1})),a()}},i.a.createElement("div",{style:{position:"absolute",bottom:"50%",right:"50%",height:"5px",width:"5px",background:"linear-gradient(to bottom right, rgba(0,0,0,0) 50%, rgba(0,0,0,0) 5%, rgba(0,0,0,1) 45%"}})))}var gt,Et,vt=Object(O.a)("DASHBOARDS/SET_DASHBOARD"),ft=Object(O.a)("DASHBOARDS/LOAD_DASHBOARDS"),Ot=(Object(O.a)("DASHBOARDS/EDIT_DASHBOARD"),Object(O.a)("DASHBOARDS/DELETE_DASHBOARD")),Dt=Object(D.a)((it={},Object(f.a)(it,vt,function(e,t){var n=t.payload,a=Object(Ze.a)(e);return a[n.id]={dashboard:n.dashboard,name:n.name,id:n.id},a}),Object(f.a)(it,ft,function(e,t){return t.payload}),Object(f.a)(it,Ot,function(e,t){var n=t.payload,a=Object(Ze.a)(e);return a[n]="",a}),it),[]),jt=function(e){return e.dashboards},yt=Object(O.a)("DASHBOARD_NAME/SET_NAME"),Nt=Object(O.a)("DASHBOARD_NAME/CLEAR_NAME"),St=Object(D.a)((gt={},Object(f.a)(gt,yt,function(e,t){return t.payload}),Object(f.a)(gt,Nt,function(e,t){t.payload;return"newDashboard"}),gt),"newDashboard"),wt=function(e){return e.dashboardName},It=Object(O.a)("DASHBOARD_NAME/SET_ID"),Mt=Object(O.a)("DASHBOARD_NAME/CLEAR_ID"),Tt=Object(D.a)((Et={},Object(f.a)(Et,It,function(e,t){return t.payload}),Object(f.a)(Et,Mt,function(e,t){t.payload;return null}),Et),null),At=function(e){return e.dashboardId},Ct=n(61),Lt=n.n(Ct);function Rt(){return{element:{type:"widget",size:{X:0,Y:0,H:100,W:200}},X:0,Y:0}}var xt=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).upperDiv=Object(r.createRef)(),n}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){var e=Lt.a.parse(this.props.location.search);e.id&&this.props.dashboards[e.id]?(this.props.setNewDashboard(this.props.dashboards[e.id].dashboard),this.props.setDashboardName(this.props.dashboards[e.id].name),this.props.setDashboardId(parseInt(e.id))):(this.props.setDashboardId(this.props.dashboards.length),this.props.setDashboardName("Dashboard #".concat(this.props.dashboards.length)),this.props.clearNewDashboard())}},{key:"componentDidMount",value:function(){this.props.isLogin.islogin&&this.props.setWidgetSize({left:this.upperDiv.current.offsetLeft,top:this.upperDiv.current.offsetTop})}},{key:"componentDidUpdate",value:function(){this.props.isLogin.islogin&&this.props.setWidgetSize({left:this.upperDiv.current.offsetLeft,top:this.upperDiv.current.offsetTop})}},{key:"componentWillUnmount",value:function(){this.props.setDashboardId(null),this.props.clearNewDashboard(),this.props.clearWidgetSize()}},{key:"render",value:function(){var e=this.props,t=e.setMouseCoordinate,n=e.isLogin,a=e.installationResponce,o=e.setNewElement,r=e.newElement,l=e.newDashboard,c=e.setToNewDashboard,s=e.editElement,d=e.deleteElement,u=e.setDashboard,m=e.dashboardName,p=e.setDashboardName,b=e.dashboardId,h=e.instDataObject,g=e.setTargetWidget,E=e.clearWidgetSize;return n.islogin?i.a.createElement("div",{className:"constructor"},i.a.createElement("div",{className:"element-select-div",style:{width:"100%"}},a.data&&a.data.records?i.a.createElement(function(){return i.a.createElement(Ce.a,{native:!0,inputProps:{style:{width:"25"}},input:i.a.createElement(Le.a,null),color:"primary",name:"site-select",value:r.idSite,onChange:function(e){var t=e.target.value;"-"!==t&&o({idSite:t})}},i.a.createElement("option",{key:"null",value:"-",hidden:!0},"Choose site"),a.data.records.map(function(e){return i.a.createElement("option",{key:e.idSite,value:e.idSite},e.name)}))},null):i.a.createElement("div",null,"Loading..."),a.data&&a.data.records?i.a.createElement(function(){return i.a.createElement(Ce.a,{native:!0,inputProps:{style:{width:"25"}},input:i.a.createElement(Le.a,null),color:"primary",name:"param-select",value:r.param,onChange:function(e){var t=e.target.value;r.idSite!==_e.idSite&&t!==_e.param&&o({param:t,paramName:h[r.idSite][t].name,value:h[r.idSite][t].value,name:h[r.idSite][t].name})}},i.a.createElement("option",{key:"null",value:"-",hidden:!0},r.idSite===_e.idSite?"Choose site first":"Choose parameter"),function(e,t){var n=[];for(var a in e[t])n.push({id:a,name:e[t][a].name,value:e[t][a].value});return n}(h,r.idSite).map(function(e){return i.a.createElement("option",{key:e.id,value:e.id},e.name)}))},null):null,i.a.createElement(Le.a,{inputProps:{style:{width:"-webkit-fill-available"}},color:"primary",placeholder:"Edit parameter name",value:r.name||"",onChange:function(e){var t=e.target.value;o({name:t})}}),i.a.createElement(ae.a,{variant:"outlined",style:{marginLeft:"10px"},onClick:function(){c(new Rt)}},"Add widget")),i.a.createElement("div",{ref:this.upperDiv,className:"constructor-box",id:"constructor-box",style:{position:"relative",height:"100vh"}},i.a.createElement(st,null),i.a.createElement(Je,{newDashboard:l,editElement:s,deleteElement:d,setMouseCoordinate:t,setNewElement:o,instDataObject:h,setTargetWidget:g,clearWidgetSize:E}),i.a.createElement(ht,null)),i.a.createElement("div",{style:{position:"fixed",left:"5px",bottom:"5px",zIndex:"100"}},i.a.createElement(ne.a,{color:"primary",onChange:function(e){var t=e.target.value;return p(t)},value:m}),i.a.createElement(ae.a,{onClick:function(){var e=l.filter(function(e){return!1===e.delete||void 0===e.delete});u({dashboard:e,name:m,id:b}),alert('Dashboard "'.concat(m,'" saved. You can find it in main Menu.'))}},"Save dashboard"))):i.a.createElement("div",{className:"inner-warning"},"Please login first!")}}]),t}(i.a.Component),_t={setMouseCoordinate:Me,setNewElement:Re,setToNewDashboard:Ke,editElement:qe,deleteElement:Qe,clearElement:xe,setDashboardName:yt,setDashboardId:It,setDashboard:vt,clearNewDashboard:et,setNewDashboard:$e,setWidgetSize:ut,setTargetWidget:ut,clearWidgetSize:mt},kt=Object(v.b)(function(e){return{isLogin:z(e),installationResponce:P(e),newElement:ze(e),newDashboard:at(e),dashboards:jt(e),dashboardName:wt(e),dashboardId:At(e),instDataObject:J(e)}},_t)(xt),zt=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentWillUnmount",value:function(){clearInterval(ee),clearTimeout(ee)}},{key:"componentWillMount",value:function(){te(this.props.isLogin,this.props.setInstallations,this.props.setInstallationObjectData)}},{key:"render",value:function(){var e=this,t=this.props,n=t.dashboards,a=t.deleteDashboard,o=t.instDataObject,r=Lt.a.parse(this.props.location.search);return r.id&&n[r.id]?i.a.createElement("div",{style:{position:"static"}},i.a.createElement("div",{className:"dashboard",style:{position:"relative"}},n[r.id].dashboard.map(function(e,t){return""===e?null:"widget"===e.element.type?i.a.createElement("div",{id:t,style:{position:"absolute",left:e.element.size.X,top:e.element.size.Y,height:e.element.size.H,width:e.element.size.W,borderColor:"rgba(0, 0, 0, 255)",borderWidth:"1px",borderStyle:"solid"}},i.a.createElement("div",null,"Some content....")):i.a.createElement("div",{key:t,style:{position:"absolute",left:e.X,top:e.Y}},"".concat(e.element.name," : \n                            ").concat(o[e.element.idSite]&&o[e.element.idSite][e.element.param]?o[e.element.idSite][e.element.param].value:"---"))})),i.a.createElement("div",{style:{position:"fixed",left:"5px",bottom:"5px"}},i.a.createElement(ae.a,{onClick:function(){e.props.history.push("/newdashboard/?id=".concat(r.id))}},"Change dashboard"),i.a.createElement(ae.a,{onClick:function(){window.confirm("Do you really want to delete dashboard?")&&(a(r.id),e.props.history.push("/"))}},"Delete dashboard"))):n.map(function(e,t){return e?i.a.createElement(g.b,{key:t,to:"/dashboards/?id=".concat(e.id)},i.a.createElement("div",null,e.name)):null})}}]),t}(i.a.Component),Wt={setInstallations:H,deleteDashboard:Ot,setInstallationObjectData:V},Yt=Object(v.b)(function(e){return{dashboards:jt(e),installationsResponce:P(e),isLogin:z(e),instDataObject:J(e)}},Wt)(zt),Xt=Object(O.a)("HIDE_MAIN_MENU/TOGGLE_MAIN_MENU"),Ht=Object(D.a)(Object(f.a)({},Xt,function(e,t){t.payload;return!e}),!0),Bt=function(e){return e.hideMainMenu},Pt=Object(h.a)({palette:{primary:Ne.a,secondary:Se.a}}),Ut=function(){return i.a.createElement("div",null,i.a.createElement("h2",null,"404 Error: Page not found"),i.a.createElement(g.b,{to:"/sites"},"Go to main"))},Vt=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){var e=localStorage.getItem("loginVRM"),t=localStorage.getItem("installationsVRM"),n=localStorage.getItem("dashboards"),a=localStorage.getItem("installationsObjectData");e&&this.props.setIsLogin(JSON.parse(e)),t&&this.props.setInst(JSON.parse(t)),n&&this.props.setDashboards(JSON.parse(n)),a&&this.props.setInstallationObjectData(JSON.parse(a))}},{key:"render",value:function(){var e=this.props,t=e.dashboards,n=e.hideMainMenu,a=e.toggleHide,o=e.setDashboardId,r=e.setDashboardName,l=e.clearNewDashboard,c=e.clearWidgetSize;return i.a.createElement(b.a,{theme:Pt},i.a.createElement("div",{style:{position:"fixed",top:"5px",right:"10px"}},i.a.createElement("h1",null,"PV monitor V1.0.0")),i.a.createElement("div",{className:"app"},i.a.createElement(g.a,{basename:"/PVM"},i.a.createElement(we,{dashboards:t,toggleHide:a,hide:n,setDashboardId:o,setDashboardName:r,clearNewDashboard:l,clearWidgetSize:c}),i.a.createElement(se,null),i.a.createElement(E.d,null,i.a.createElement(E.b,{exact:!0,path:"/",component:ye}),i.a.createElement(E.b,{path:"/sites",component:ye}),i.a.createElement(E.b,{path:"/dashboards",component:Yt}),i.a.createElement(E.b,{path:"/newdashboard",component:kt}),i.a.createElement(E.b,{component:Ut})))))}}]),t}(i.a.Component),Gt={setIsLogin:x,setInst:H,setDashboards:ft,toggleHide:Xt,setInstallationObjectData:V,setDashboardId:It,setDashboardName:yt,clearNewDashboard:et,clearWidgetSize:mt},Jt=Object(v.b)(function(e){return{dashboards:jt(e),hideMainMenu:Bt(e)}},Gt)(Vt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ft,Zt=n(45),Kt={loginField:y,loginInput:A,loginVRM:k,installationsVRM:B,selectedInst:Ee,installationsObjectData:G,mouseCoordinates:Te,newDashboardElement:ke,newDashboard:nt,dashboards:Dt,dashboardName:St,dashboardId:Tt,hideMainMenu:Ht,currentWidgetSize:bt};var $t=(Ft={},Object(f.a)(Ft,"LOGIN_VRM/SET_ISNTLOGIN","loginVRM"),Object(f.a)(Ft,L,"loginVRM"),Object(f.a)(Ft,X,"installationsVRM"),Object(f.a)(Ft,U,"installationsObjectData"),Object(f.a)(Ft,"DASHBOARDS/SET_DASHBOARD","dashboards"),Ft),qt=[X,"LOGIN_VRM/SET_ISNTLOGIN",L,U,"DASHBOARDS/SET_DASHBOARD"],Qt=function(e){return function(t){return function(n){var a,o,r=t(n),i=e.getState();return-1!==qt.indexOf(n.type)&&(a=$t[n.type],o=JSON.stringify(i[$t[n.type]]),localStorage.setItem(a,o)),r}}},en=function(){return[Qt]};n.d(t,"store",function(){return an});var tn,nn,an=(tn=Kt,nn=en(),Object(Zt.d)(Object(Zt.c)(tn),{},Zt.a.apply(void 0,Object(Ze.a)(nn))));c.a.render(i.a.createElement(function(){return i.a.createElement(v.a,{store:an},i.a.createElement(Jt,null))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},92:function(e,t,n){e.exports=n(133)},97:function(e,t,n){},98:function(e,t,n){}},[[92,1,2]]]);
//# sourceMappingURL=main.0e1eeef8.chunk.js.map